<div class="briefing-container">
  <div class="briefing-wrapper">
    <div id="briefing-container"
         data-controller="briefing"
         data-briefing-user-id-value="<%= @user_id %>"
         data-briefing-date-value="<%= @date.iso8601 %>"
         data-briefing-prev-date-value="<%= @prev_date %>"
         data-briefing-next-date-value="<%= @next_date %>"
         data-briefing-can-go-next-value="<%= @can_go_next %>">

      <!-- Loading State -->
      <div id="loading-state" class="hidden">
        <div class="briefing-card briefing-loading">
          <div class="briefing-header">
            <div class="loading-skeleton" style="height: 1.5rem; width: 12rem;"></div>
            <div class="loading-skeleton" style="height: 1rem; width: 8rem; margin-top: 0.5rem;"></div>
          </div>
          <div style="margin-top: 1.5rem;">
            <div class="loading-skeleton" style="height: 6rem;"></div>
          </div>
        </div>
      </div>

      <!-- Main Content -->
      <div id="content-state" class="briefing-card">
        <!-- Token Display (top-right caption) -->
        <div id="token-display" class="token-display hidden">
          <span class="token-model">...</span>
          <span class="token-separator">Â·</span>
          <span class="token-count">0</span>
          <span class="token-label">tokens</span>
        </div>

        <!-- Header with Navigation -->
        <header class="briefing-header">
          <div class="briefing-nav">
            <button class="nav-btn" data-action="click->briefing#prevDay" title="Previous day">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
            </button>
            <div class="briefing-title-group">
              <h1 id="greeting" class="briefing-greeting">Daily Briefing</h1>
              <p id="briefing-date" class="briefing-date"><%= @date.strftime('%A, %B %-d, %Y') %></p>
            </div>
            <button class="nav-btn" data-action="click->briefing#nextDay" id="next-btn" <%= 'disabled' unless @can_go_next %> title="Next day">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </button>
          </div>
        </header>

        <!-- Status (single consolidated block) -->
        <section id="status-container">
          <!-- Status streamed here -->
        </section>

        <!-- Suggestions -->
        <section id="suggestions-section" class="suggestions-section hidden">
          <h2 class="suggestions-header">What to do today</h2>
          <div id="suggestions-container">
            <!-- Suggestions streamed here -->
          </div>
        </section>

        <!-- Action Bar -->
        <div class="action-bar" id="action-bar">
          <button id="generate-btn"
                  data-action="click->briefing#generate"
                  class="btn btn-primary">
            Generate Briefing
          </button>
        </div>

        <!-- Warning State -->
        <div id="warning-state" class="hidden">
          <div class="status-card status-card--warning">
            <p id="warning-message" class="status-text"></p>
          </div>
        </div>

        <!-- Error State -->
        <div id="error-state" class="hidden">
          <div class="status-card status-card--warning">
            <p id="error-message" class="status-text"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

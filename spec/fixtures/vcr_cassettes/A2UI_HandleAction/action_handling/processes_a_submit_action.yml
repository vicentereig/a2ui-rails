---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"action\": {\n      \"type\": \"object\",\n      \"properties\":
        {\n        \"_type\": {\n          \"type\": \"string\",\n          \"const\":
        \"UserAction\"\n        },\n        \"name\": {\n          \"type\": \"string\",\n          \"description\":
        \"Action name from component\"\n        },\n        \"surface_id\": {\n          \"type\":
        \"string\"\n        },\n        \"source_id\": {\n          \"type\": \"string\",\n          \"description\":
        \"Component ID that triggered action\"\n        },\n        \"context\": {\n          \"type\":
        \"object\",\n          \"additionalProperties\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": \"Resolved context values\"\n        }\n      },\n      \"required\":
        [\n        \"_type\",\n        \"name\",\n        \"surface_id\",\n        \"source_id\",\n        \"context\"\n      ],\n      \"description\":
        \"A2UI::UserAction struct\"\n    },\n    \"current_data\": {\n      \"type\":
        \"string\",\n      \"description\": \"Surface data as JSON\"\n    },\n    \"business_rules\":
        {\n      \"type\": \"string\",\n      \"description\": \"Domain constraints\"\n    }\n  },\n  \"required\":
        [\n    \"action\"\n  ]\n}\n```\nYour output schema fields are:\n```json\n{\n  \"$schema\":
        \"http://json-schema.org/draft-06/schema#\",\n  \"type\": \"object\",\n  \"properties\":
        {\n    \"response_type\": {\n      \"type\": \"string\",\n      \"enum\":
        [\n        \"update_ui\",\n        \"navigate\",\n        \"delete_surface\",\n        \"no_op\"\n      ]\n    },\n    \"streams\":
        {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\":
        {\n          \"_type\": {\n            \"type\": \"string\",\n            \"const\":
        \"StreamOp\"\n          },\n          \"action\": {\n            \"type\":
        \"string\",\n            \"enum\": [\n              \"append\",\n              \"prepend\",\n              \"replace\",\n              \"update\",\n              \"remove\",\n              \"before\",\n              \"after\"\n            ]\n          },\n          \"target\":
        {\n            \"type\": \"string\",\n            \"description\": \"Target
        element ID\"\n          },\n          \"component_ids\": {\n            \"type\":
        \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            },\n            \"description\":
        \"Components to render\"\n          }\n        },\n        \"required\": [\n          \"_type\",\n          \"action\",\n          \"target\",\n          \"component_ids\"\n        ],\n        \"description\":
        \"A2UI::StreamOp struct\"\n      }\n    },\n    \"components\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"oneOf\": [\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"TextComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"content\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"LiteralValue\"\n                      },\n                      \"value\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"The literal string value\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"value\"\n                    ],\n                    \"description\":
        \"A2UI::LiteralValue struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"PathReference\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to data model (e.g., /user/name)\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\"\n                    ],\n                    \"description\":
        \"A2UI::PathReference struct\"\n                  }\n                ],\n                \"description\":
        \"Text content\"\n              },\n              \"usage_hint\": {\n                \"type\":
        \"string\",\n                \"enum\": [\n                  \"h1\",\n                  \"h2\",\n                  \"h3\",\n                  \"h4\",\n                  \"h5\",\n                  \"body\",\n                  \"caption\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"content\",\n              \"usage_hint\"\n            ],\n            \"description\":
        \"A2UI::TextComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ImageComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"src\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"LiteralValue\"\n                      },\n                      \"value\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"The literal string value\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"value\"\n                    ],\n                    \"description\":
        \"A2UI::LiteralValue struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"PathReference\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to data model (e.g., /user/name)\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\"\n                    ],\n                    \"description\":
        \"A2UI::PathReference struct\"\n                  }\n                ],\n                \"description\":
        \"Image URL\"\n              },\n              \"alt\": {\n                \"type\":
        \"string\"\n              },\n              \"fit\": {\n                \"type\":
        \"string\",\n                \"enum\": [\n                  \"contain\",\n                  \"cover\",\n                  \"fill\",\n                  \"scale_down\",\n                  \"none\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"src\",\n              \"alt\",\n              \"fit\"\n            ],\n            \"description\":
        \"A2UI::ImageComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"IconComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"name\":
        {\n                \"type\": \"string\",\n                \"description\":
        \"Material icon name (e.g., check, close, menu)\"\n              },\n              \"size\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"name\",\n              \"size\"\n            ],\n            \"description\":
        \"A2UI::IconComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ButtonComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"label\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"LiteralValue\"\n                      },\n                      \"value\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"The literal string value\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"value\"\n                    ],\n                    \"description\":
        \"A2UI::LiteralValue struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"PathReference\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to data model (e.g., /user/name)\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\"\n                    ],\n                    \"description\":
        \"A2UI::PathReference struct\"\n                  }\n                ],\n                \"description\":
        \"Button label text\"\n              },\n              \"action\": {\n                \"type\":
        \"object\",\n                \"properties\": {\n                  \"_type\":
        {\n                    \"type\": \"string\",\n                    \"const\":
        \"Action\"\n                  },\n                  \"name\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"Action identifier sent
        to server\"\n                  },\n                  \"context\": {\n                    \"type\":
        \"array\",\n                    \"items\": {\n                      \"type\":
        \"object\",\n                      \"properties\": {\n                        \"_type\":
        {\n                          \"type\": \"string\",\n                          \"const\":
        \"ContextBinding\"\n                        },\n                        \"key\":
        {\n                          \"type\": \"string\",\n                          \"description\":
        \"Key name in the action context\"\n                        },\n                        \"path\":
        {\n                          \"type\": \"string\",\n                          \"description\":
        \"JSON Pointer to extract value from\"\n                        }\n                      },\n                      \"required\":
        [\n                        \"_type\",\n                        \"key\",\n                        \"path\"\n                      ],\n                      \"description\":
        \"A2UI::ContextBinding struct\"\n                    }\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"name\",\n                  \"context\"\n                ],\n                \"description\":
        \"A2UI::Action struct\"\n              },\n              \"disabled\": {\n                \"type\":
        \"boolean\"\n              },\n              \"variant\": {\n                \"type\":
        \"string\",\n                \"description\": \"primary, secondary, or danger\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"label\",\n              \"action\",\n              \"disabled\",\n              \"variant\"\n            ],\n            \"description\":
        \"A2UI::ButtonComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"TextFieldComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"value\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to bound value in data model\"\n              },\n              \"input_type\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"text\",\n                  \"number\",\n                  \"date\",\n                  \"longtext\",\n                  \"email\",\n                  \"tel\",\n                  \"url\"\n                ]\n              },\n              \"label\":
        {\n                \"type\": \"string\"\n              },\n              \"placeholder\":
        {\n                \"type\": \"string\"\n              },\n              \"required\":
        {\n                \"type\": \"boolean\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"value\",\n              \"input_type\",\n              \"label\",\n              \"placeholder\",\n              \"required\"\n            ],\n            \"description\":
        \"A2UI::TextFieldComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"CheckBoxComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"checked\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to boolean in data model\"\n              },\n              \"label\":
        {\n                \"type\": \"string\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"checked\",\n              \"label\"\n            ],\n            \"description\":
        \"A2UI::CheckBoxComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"SliderComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"value\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to numeric value\"\n              },\n              \"min\": {\n                \"type\":
        \"number\"\n              },\n              \"max\": {\n                \"type\":
        \"number\"\n              },\n              \"step\": {\n                \"type\":
        \"number\"\n              },\n              \"label\": {\n                \"type\":
        \"string\"\n              }\n            },\n            \"required\": [\n              \"_type\",\n              \"id\",\n              \"value\",\n              \"min\",\n              \"max\",\n              \"step\",\n              \"label\"\n            ],\n            \"description\":
        \"A2UI::SliderComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"SelectComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"value\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to selected value\"\n              },\n              \"options_path\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to array of {value, label} options\"\n              },\n              \"label\":
        {\n                \"type\": \"string\"\n              },\n              \"placeholder\":
        {\n                \"type\": \"string\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"value\",\n              \"options_path\",\n              \"label\",\n              \"placeholder\"\n            ],\n            \"description\":
        \"A2UI::SelectComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"RowComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"children\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"ExplicitChildren\"\n                      },\n                      \"ids\":
        {\n                        \"type\": \"array\",\n                        \"items\":
        {\n                          \"type\": \"string\"\n                        },\n                        \"description\":
        \"List of child component IDs\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"ids\"\n                    ],\n                    \"description\":
        \"A2UI::ExplicitChildren struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"DataDrivenChildren\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to array in data model\"\n                      },\n                      \"template_id\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"Component ID to use as template for each item\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\",\n                      \"template_id\"\n                    ],\n                    \"description\":
        \"A2UI::DataDrivenChildren struct\"\n                  }\n                ],\n                \"description\":
        \"Union of multiple types\"\n              },\n              \"distribution\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"space_between\",\n                  \"space_around\",\n                  \"space_evenly\"\n                ]\n              },\n              \"alignment\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"stretch\"\n                ]\n              },\n              \"gap\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"children\",\n              \"distribution\",\n              \"alignment\",\n              \"gap\"\n            ],\n            \"description\":
        \"A2UI::RowComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ColumnComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"children\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"ExplicitChildren\"\n                      },\n                      \"ids\":
        {\n                        \"type\": \"array\",\n                        \"items\":
        {\n                          \"type\": \"string\"\n                        },\n                        \"description\":
        \"List of child component IDs\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"ids\"\n                    ],\n                    \"description\":
        \"A2UI::ExplicitChildren struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"DataDrivenChildren\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to array in data model\"\n                      },\n                      \"template_id\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"Component ID to use as template for each item\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\",\n                      \"template_id\"\n                    ],\n                    \"description\":
        \"A2UI::DataDrivenChildren struct\"\n                  }\n                ],\n                \"description\":
        \"Union of multiple types\"\n              },\n              \"distribution\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"space_between\",\n                  \"space_around\",\n                  \"space_evenly\"\n                ]\n              },\n              \"alignment\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"stretch\"\n                ]\n              },\n              \"gap\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"children\",\n              \"distribution\",\n              \"alignment\",\n              \"gap\"\n            ],\n            \"description\":
        \"A2UI::ColumnComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"CardComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"child_id\":
        {\n                \"type\": \"string\",\n                \"description\":
        \"ID of the child component\"\n              },\n              \"title\":
        {\n                \"type\": \"string\"\n              },\n              \"elevation\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"child_id\",\n              \"title\",\n              \"elevation\"\n            ],\n            \"description\":
        \"A2UI::CardComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ListComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"children\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"ExplicitChildren\"\n                      },\n                      \"ids\":
        {\n                        \"type\": \"array\",\n                        \"items\":
        {\n                          \"type\": \"string\"\n                        },\n                        \"description\":
        \"List of child component IDs\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"ids\"\n                    ],\n                    \"description\":
        \"A2UI::ExplicitChildren struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"DataDrivenChildren\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to array in data model\"\n                      },\n                      \"template_id\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"Component ID to use as template for each item\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\",\n                      \"template_id\"\n                    ],\n                    \"description\":
        \"A2UI::DataDrivenChildren struct\"\n                  }\n                ],\n                \"description\":
        \"Union of multiple types\"\n              },\n              \"orientation\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"horizontal\",\n                  \"vertical\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"children\",\n              \"orientation\"\n            ],\n            \"description\":
        \"A2UI::ListComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"DividerComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"orientation\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"horizontal\",\n                  \"vertical\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"orientation\"\n            ],\n            \"description\":
        \"A2UI::DividerComponent struct\"\n          }\n        ],\n        \"description\":
        \"Union of multiple types\"\n      }\n    },\n    \"data_updates\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\":
        {\n          \"_type\": {\n            \"type\": \"string\",\n            \"const\":
        \"DataUpdate\"\n          },\n          \"path\": {\n            \"type\":
        \"string\",\n            \"description\": \"JSON Pointer path (e.g., /reservation/guests)\"\n          },\n          \"entries\":
        {\n            \"type\": \"array\",\n            \"items\": {\n              \"oneOf\":
        [\n                {\n                  \"type\": \"object\",\n                  \"properties\":
        {\n                    \"_type\": {\n                      \"type\": \"string\",\n                      \"const\":
        \"StringValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"string\": {\n                      \"type\":
        \"string\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"string\"\n                  ],\n                  \"description\":
        \"A2UI::StringValue struct\"\n                },\n                {\n                  \"type\":
        \"object\",\n                  \"properties\": {\n                    \"_type\":
        {\n                      \"type\": \"string\",\n                      \"const\":
        \"NumberValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"number\": {\n                      \"type\":
        \"number\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"number\"\n                  ],\n                  \"description\":
        \"A2UI::NumberValue struct\"\n                },\n                {\n                  \"type\":
        \"object\",\n                  \"properties\": {\n                    \"_type\":
        {\n                      \"type\": \"string\",\n                      \"const\":
        \"BooleanValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"boolean\": {\n                      \"type\":
        \"boolean\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"boolean\"\n                  ],\n                  \"description\":
        \"A2UI::BooleanValue struct\"\n                },\n                {\n                  \"type\":
        \"object\",\n                  \"properties\": {\n                    \"_type\":
        {\n                      \"type\": \"string\",\n                      \"const\":
        \"ObjectValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"entries\": {\n                      \"type\":
        \"object\",\n                      \"additionalProperties\": {\n                        \"type\":
        \"string\"\n                      },\n                      \"description\":
        \"Nested key-value pairs as JSON-like hash\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"entries\"\n                  ],\n                  \"description\":
        \"A2UI::ObjectValue struct\"\n                }\n              ],\n              \"description\":
        \"Union of multiple types\"\n            },\n            \"description\":
        \"Values to set at this path\"\n          }\n        },\n        \"required\":
        [\n          \"_type\",\n          \"path\",\n          \"entries\"\n        ],\n        \"description\":
        \"A2UI::DataUpdate struct\"\n      }\n    },\n    \"redirect_url\": {\n      \"type\":
        \"string\",\n      \"description\": \"URL if navigating\"\n    },\n    \"message\":
        {\n      \"type\": \"string\",\n      \"description\": \"User-facing message\"\n    },\n    \"reasoning\":
        {\n      \"type\": \"string\",\n      \"description\": \"Step by step reasoning
        process\"\n    }\n  },\n  \"required\": [\n    \"response_type\",\n    \"reasoning\"\n  ]\n}\n```\n\nAll
        interactions will be structured in the following way, with the appropriate
        values filled in.\n## Input values\n```json\n{input_values}\n```\n## Output
        values\nRespond exclusively with the output schema fields in the json block
        below.\n```json\n{output_values}\n```\n\nIn adhering to this structure, your
        objective is: Process user action and generate response. Think step by step."},{"role":"user","content":"##
        Input Values\n```json\n{\n  \"action\": {\n    \"name\": \"submit_booking\",\n    \"surface_id\":
        \"booking\",\n    \"source_id\": \"submit-btn\",\n    \"context\": {\n      \"guests\":
        \"2\",\n      \"date\": \"2025-01-15\"\n    }\n  },\n  \"current_data\": \"{\\\"booking\\\":
        {\\\"guests\\\": \\\"2\\\", \\\"date\\\": \\\"2025-01-15\\\"}}\",\n  \"business_rules\":
        \"Maximum 10 guests per booking\"\n}\n```\n\nRespond with the corresponding
        output schema fields wrapped in a ```json ``` block,\nstarting with the heading
        `## Output values`."}],"temperature":1.0}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - OpenAI::Client/Ruby 0.42.0
      Host:
      - api.openai.com
      X-Stainless-Arch:
      - arm64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - MacOS
      X-Stainless-Package-Version:
      - 0.42.0
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.6
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_API_KEY>
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '35521'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 30 Dec 2025 22:05:55 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-ftp1nrq85er9xnlu0la8snte
      Openai-Processing-Ms:
      - '2792'
      Openai-Project:
      - proj_n52OL5vlzVaXGnYDaGWmVX5F
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '3059'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9998'
      X-Ratelimit-Remaining-Tokens:
      - '191963'
      X-Ratelimit-Reset-Requests:
      - 10.147s
      X-Ratelimit-Reset-Tokens:
      - 2.411s
      X-Request-Id:
      - req_269d14eb61484ecfab7f3aaacdb943c9
      X-Openai-Proxy-Wasm:
      - v0.1
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=0cT2W4KqLKL7oCg97sqkTiRu5NYSFaxRqtlKpLm4LME-1767132355-1.0.1.1-aIBPMmRhy.I158me0hSX8YytjurKIDgOcifAJw8fjQ44fL6gDBwJ9RwhCNPQY1CsMq3grSS2svaWWiKMNIMBIatax6CRIufokpn9vpacjIw;
        path=/; expires=Tue, 30-Dec-25 22:35:55 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=5OcpZ552ljKalwWHVZcRKQ6AiV3ECrKm3OylPMcMUrQ-1767132355354-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 9b64d74d18314376-EWR
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-Csc8eBeSnMEFKO0bMumokcQKLWDdV",
          "object": "chat.completion",
          "created": 1767132352,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "## Output values\n```json\n{\n  \"response_type\": \"navigate\",\n  \"streams\": [],\n  \"components\": [],\n  \"data_updates\": [],\n  \"redirect_url\": \"/confirmation?guests=2&date=2025-01-15\",\n  \"message\": \"Your booking has been submitted successfully.\",\n  \"reasoning\": \"User submitted a booking for 2 guests on January 15, 2025. The booking is within the allowed business rule of a maximum of 10 guests.\"\n}\n```",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 5667,
            "completion_tokens": 107,
            "total_tokens": 5774,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": "fp_3683ee3deb"
        }
  recorded_at: Tue, 30 Dec 2025 22:05:55 GMT
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"action\": {\n      \"type\": \"object\",\n      \"properties\":
        {\n        \"_type\": {\n          \"type\": \"string\",\n          \"const\":
        \"UserAction\"\n        },\n        \"name\": {\n          \"type\": \"string\",\n          \"description\":
        \"Action name from component\"\n        },\n        \"surface_id\": {\n          \"type\":
        \"string\"\n        },\n        \"source_id\": {\n          \"type\": \"string\",\n          \"description\":
        \"Component ID that triggered action\"\n        },\n        \"context\": {\n          \"type\":
        \"object\",\n          \"additionalProperties\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": \"Resolved context values\"\n        }\n      },\n      \"required\":
        [\n        \"_type\",\n        \"name\",\n        \"surface_id\",\n        \"source_id\",\n        \"context\"\n      ],\n      \"description\":
        \"A2UI::UserAction struct\"\n    },\n    \"current_data\": {\n      \"type\":
        \"string\",\n      \"description\": \"Surface data as JSON\"\n    },\n    \"business_rules\":
        {\n      \"type\": \"string\",\n      \"description\": \"Domain constraints\"\n    }\n  },\n  \"required\":
        [\n    \"action\"\n  ]\n}\n```\nYour output schema fields are:\n```json\n{\n  \"$schema\":
        \"http://json-schema.org/draft-06/schema#\",\n  \"type\": \"object\",\n  \"properties\":
        {\n    \"response_type\": {\n      \"type\": \"string\",\n      \"enum\":
        [\n        \"update_ui\",\n        \"navigate\",\n        \"delete_surface\",\n        \"no_op\"\n      ]\n    },\n    \"streams\":
        {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\":
        {\n          \"_type\": {\n            \"type\": \"string\",\n            \"const\":
        \"StreamOp\"\n          },\n          \"action\": {\n            \"type\":
        \"string\",\n            \"enum\": [\n              \"append\",\n              \"prepend\",\n              \"replace\",\n              \"update\",\n              \"remove\",\n              \"before\",\n              \"after\"\n            ]\n          },\n          \"target\":
        {\n            \"type\": \"string\",\n            \"description\": \"Target
        element ID\"\n          },\n          \"component_ids\": {\n            \"type\":
        \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            },\n            \"description\":
        \"Components to render\"\n          }\n        },\n        \"required\": [\n          \"_type\",\n          \"action\",\n          \"target\",\n          \"component_ids\"\n        ],\n        \"description\":
        \"A2UI::StreamOp struct\"\n      }\n    },\n    \"components\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"oneOf\": [\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"TextComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"content\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"LiteralValue\"\n                      },\n                      \"value\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"The literal string value\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"value\"\n                    ],\n                    \"description\":
        \"A2UI::LiteralValue struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"PathReference\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to data model (e.g., /user/name)\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\"\n                    ],\n                    \"description\":
        \"A2UI::PathReference struct\"\n                  }\n                ],\n                \"description\":
        \"Text content\"\n              },\n              \"usage_hint\": {\n                \"type\":
        \"string\",\n                \"enum\": [\n                  \"h1\",\n                  \"h2\",\n                  \"h3\",\n                  \"h4\",\n                  \"h5\",\n                  \"body\",\n                  \"caption\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"content\",\n              \"usage_hint\"\n            ],\n            \"description\":
        \"A2UI::TextComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ImageComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"src\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"LiteralValue\"\n                      },\n                      \"value\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"The literal string value\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"value\"\n                    ],\n                    \"description\":
        \"A2UI::LiteralValue struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"PathReference\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to data model (e.g., /user/name)\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\"\n                    ],\n                    \"description\":
        \"A2UI::PathReference struct\"\n                  }\n                ],\n                \"description\":
        \"Image URL\"\n              },\n              \"alt\": {\n                \"type\":
        \"string\"\n              },\n              \"fit\": {\n                \"type\":
        \"string\",\n                \"enum\": [\n                  \"contain\",\n                  \"cover\",\n                  \"fill\",\n                  \"scale_down\",\n                  \"none\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"src\",\n              \"alt\",\n              \"fit\"\n            ],\n            \"description\":
        \"A2UI::ImageComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"IconComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"name\":
        {\n                \"type\": \"string\",\n                \"description\":
        \"Material icon name (e.g., check, close, menu)\"\n              },\n              \"size\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"name\",\n              \"size\"\n            ],\n            \"description\":
        \"A2UI::IconComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ButtonComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"label\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"LiteralValue\"\n                      },\n                      \"value\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"The literal string value\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"value\"\n                    ],\n                    \"description\":
        \"A2UI::LiteralValue struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"PathReference\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to data model (e.g., /user/name)\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\"\n                    ],\n                    \"description\":
        \"A2UI::PathReference struct\"\n                  }\n                ],\n                \"description\":
        \"Button label text\"\n              },\n              \"action\": {\n                \"type\":
        \"object\",\n                \"properties\": {\n                  \"_type\":
        {\n                    \"type\": \"string\",\n                    \"const\":
        \"Action\"\n                  },\n                  \"name\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"Action identifier sent
        to server\"\n                  },\n                  \"context\": {\n                    \"type\":
        \"array\",\n                    \"items\": {\n                      \"type\":
        \"object\",\n                      \"properties\": {\n                        \"_type\":
        {\n                          \"type\": \"string\",\n                          \"const\":
        \"ContextBinding\"\n                        },\n                        \"key\":
        {\n                          \"type\": \"string\",\n                          \"description\":
        \"Key name in the action context\"\n                        },\n                        \"path\":
        {\n                          \"type\": \"string\",\n                          \"description\":
        \"JSON Pointer to extract value from\"\n                        }\n                      },\n                      \"required\":
        [\n                        \"_type\",\n                        \"key\",\n                        \"path\"\n                      ],\n                      \"description\":
        \"A2UI::ContextBinding struct\"\n                    }\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"name\",\n                  \"context\"\n                ],\n                \"description\":
        \"A2UI::Action struct\"\n              },\n              \"disabled\": {\n                \"type\":
        \"boolean\"\n              },\n              \"variant\": {\n                \"type\":
        \"string\",\n                \"description\": \"primary, secondary, or danger\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"label\",\n              \"action\",\n              \"disabled\",\n              \"variant\"\n            ],\n            \"description\":
        \"A2UI::ButtonComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"TextFieldComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"value\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to bound value in data model\"\n              },\n              \"input_type\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"text\",\n                  \"number\",\n                  \"date\",\n                  \"longtext\",\n                  \"email\",\n                  \"tel\",\n                  \"url\"\n                ]\n              },\n              \"label\":
        {\n                \"type\": \"string\"\n              },\n              \"placeholder\":
        {\n                \"type\": \"string\"\n              },\n              \"is_required\":
        {\n                \"type\": \"boolean\",\n                \"description\":
        \"Whether the field is required\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"value\",\n              \"input_type\",\n              \"label\",\n              \"placeholder\",\n              \"is_required\"\n            ],\n            \"description\":
        \"A2UI::TextFieldComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"CheckBoxComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"checked\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to boolean in data model\"\n              },\n              \"label\":
        {\n                \"type\": \"string\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"checked\",\n              \"label\"\n            ],\n            \"description\":
        \"A2UI::CheckBoxComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"SliderComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"value\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to numeric value\"\n              },\n              \"min\": {\n                \"type\":
        \"number\"\n              },\n              \"max\": {\n                \"type\":
        \"number\"\n              },\n              \"step\": {\n                \"type\":
        \"number\"\n              },\n              \"label\": {\n                \"type\":
        \"string\"\n              }\n            },\n            \"required\": [\n              \"_type\",\n              \"id\",\n              \"value\",\n              \"min\",\n              \"max\",\n              \"step\",\n              \"label\"\n            ],\n            \"description\":
        \"A2UI::SliderComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"SelectComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"value\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to selected value\"\n              },\n              \"options_path\":
        {\n                \"type\": \"object\",\n                \"properties\":
        {\n                  \"_type\": {\n                    \"type\": \"string\",\n                    \"const\":
        \"PathReference\"\n                  },\n                  \"path\": {\n                    \"type\":
        \"string\",\n                    \"description\": \"JSON Pointer to data model
        (e.g., /user/name)\"\n                  }\n                },\n                \"required\":
        [\n                  \"_type\",\n                  \"path\"\n                ],\n                \"description\":
        \"Path to array of {value, label} options\"\n              },\n              \"label\":
        {\n                \"type\": \"string\"\n              },\n              \"placeholder\":
        {\n                \"type\": \"string\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"value\",\n              \"options_path\",\n              \"label\",\n              \"placeholder\"\n            ],\n            \"description\":
        \"A2UI::SelectComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"RowComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"children\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"ExplicitChildren\"\n                      },\n                      \"ids\":
        {\n                        \"type\": \"array\",\n                        \"items\":
        {\n                          \"type\": \"string\"\n                        },\n                        \"description\":
        \"List of child component IDs\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"ids\"\n                    ],\n                    \"description\":
        \"A2UI::ExplicitChildren struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"DataDrivenChildren\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to array in data model\"\n                      },\n                      \"template_id\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"Component ID to use as template for each item\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\",\n                      \"template_id\"\n                    ],\n                    \"description\":
        \"A2UI::DataDrivenChildren struct\"\n                  }\n                ],\n                \"description\":
        \"Union of multiple types\"\n              },\n              \"distribution\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"space_between\",\n                  \"space_around\",\n                  \"space_evenly\"\n                ]\n              },\n              \"alignment\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"stretch\"\n                ]\n              },\n              \"gap\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"children\",\n              \"distribution\",\n              \"alignment\",\n              \"gap\"\n            ],\n            \"description\":
        \"A2UI::RowComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ColumnComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"children\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"ExplicitChildren\"\n                      },\n                      \"ids\":
        {\n                        \"type\": \"array\",\n                        \"items\":
        {\n                          \"type\": \"string\"\n                        },\n                        \"description\":
        \"List of child component IDs\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"ids\"\n                    ],\n                    \"description\":
        \"A2UI::ExplicitChildren struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"DataDrivenChildren\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to array in data model\"\n                      },\n                      \"template_id\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"Component ID to use as template for each item\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\",\n                      \"template_id\"\n                    ],\n                    \"description\":
        \"A2UI::DataDrivenChildren struct\"\n                  }\n                ],\n                \"description\":
        \"Union of multiple types\"\n              },\n              \"distribution\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"space_between\",\n                  \"space_around\",\n                  \"space_evenly\"\n                ]\n              },\n              \"alignment\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"start\",\n                  \"center\",\n                  \"end\",\n                  \"stretch\"\n                ]\n              },\n              \"gap\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"children\",\n              \"distribution\",\n              \"alignment\",\n              \"gap\"\n            ],\n            \"description\":
        \"A2UI::ColumnComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"CardComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"child_id\":
        {\n                \"type\": \"string\",\n                \"description\":
        \"ID of the child component\"\n              },\n              \"title\":
        {\n                \"type\": \"string\"\n              },\n              \"elevation\":
        {\n                \"type\": \"integer\"\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"child_id\",\n              \"title\",\n              \"elevation\"\n            ],\n            \"description\":
        \"A2UI::CardComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"ListComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"children\":
        {\n                \"oneOf\": [\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"ExplicitChildren\"\n                      },\n                      \"ids\":
        {\n                        \"type\": \"array\",\n                        \"items\":
        {\n                          \"type\": \"string\"\n                        },\n                        \"description\":
        \"List of child component IDs\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"ids\"\n                    ],\n                    \"description\":
        \"A2UI::ExplicitChildren struct\"\n                  },\n                  {\n                    \"type\":
        \"object\",\n                    \"properties\": {\n                      \"_type\":
        {\n                        \"type\": \"string\",\n                        \"const\":
        \"DataDrivenChildren\"\n                      },\n                      \"path\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"JSON Pointer to array in data model\"\n                      },\n                      \"template_id\":
        {\n                        \"type\": \"string\",\n                        \"description\":
        \"Component ID to use as template for each item\"\n                      }\n                    },\n                    \"required\":
        [\n                      \"_type\",\n                      \"path\",\n                      \"template_id\"\n                    ],\n                    \"description\":
        \"A2UI::DataDrivenChildren struct\"\n                  }\n                ],\n                \"description\":
        \"Union of multiple types\"\n              },\n              \"orientation\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"horizontal\",\n                  \"vertical\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"children\",\n              \"orientation\"\n            ],\n            \"description\":
        \"A2UI::ListComponent struct\"\n          },\n          {\n            \"type\":
        \"object\",\n            \"properties\": {\n              \"_type\": {\n                \"type\":
        \"string\",\n                \"const\": \"DividerComponent\"\n              },\n              \"id\":
        {\n                \"type\": \"string\"\n              },\n              \"orientation\":
        {\n                \"type\": \"string\",\n                \"enum\": [\n                  \"horizontal\",\n                  \"vertical\"\n                ]\n              }\n            },\n            \"required\":
        [\n              \"_type\",\n              \"id\",\n              \"orientation\"\n            ],\n            \"description\":
        \"A2UI::DividerComponent struct\"\n          }\n        ],\n        \"description\":
        \"Union of multiple types\"\n      }\n    },\n    \"data_updates\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\":
        {\n          \"_type\": {\n            \"type\": \"string\",\n            \"const\":
        \"DataUpdate\"\n          },\n          \"path\": {\n            \"type\":
        \"string\",\n            \"description\": \"JSON Pointer path (e.g., /reservation/guests)\"\n          },\n          \"entries\":
        {\n            \"type\": \"array\",\n            \"items\": {\n              \"oneOf\":
        [\n                {\n                  \"type\": \"object\",\n                  \"properties\":
        {\n                    \"_type\": {\n                      \"type\": \"string\",\n                      \"const\":
        \"StringValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"string\": {\n                      \"type\":
        \"string\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"string\"\n                  ],\n                  \"description\":
        \"A2UI::StringValue struct\"\n                },\n                {\n                  \"type\":
        \"object\",\n                  \"properties\": {\n                    \"_type\":
        {\n                      \"type\": \"string\",\n                      \"const\":
        \"NumberValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"number\": {\n                      \"type\":
        \"number\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"number\"\n                  ],\n                  \"description\":
        \"A2UI::NumberValue struct\"\n                },\n                {\n                  \"type\":
        \"object\",\n                  \"properties\": {\n                    \"_type\":
        {\n                      \"type\": \"string\",\n                      \"const\":
        \"BooleanValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"boolean\": {\n                      \"type\":
        \"boolean\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"boolean\"\n                  ],\n                  \"description\":
        \"A2UI::BooleanValue struct\"\n                },\n                {\n                  \"type\":
        \"object\",\n                  \"properties\": {\n                    \"_type\":
        {\n                      \"type\": \"string\",\n                      \"const\":
        \"ObjectValue\"\n                    },\n                    \"key\": {\n                      \"type\":
        \"string\"\n                    },\n                    \"entries\": {\n                      \"type\":
        \"object\",\n                      \"additionalProperties\": {\n                        \"type\":
        \"string\"\n                      },\n                      \"description\":
        \"Nested key-value pairs as JSON-like hash\"\n                    }\n                  },\n                  \"required\":
        [\n                    \"_type\",\n                    \"key\",\n                    \"entries\"\n                  ],\n                  \"description\":
        \"A2UI::ObjectValue struct\"\n                }\n              ],\n              \"description\":
        \"Union of multiple types\"\n            },\n            \"description\":
        \"Values to set at this path\"\n          }\n        },\n        \"required\":
        [\n          \"_type\",\n          \"path\",\n          \"entries\"\n        ],\n        \"description\":
        \"A2UI::DataUpdate struct\"\n      }\n    },\n    \"redirect_url\": {\n      \"type\":
        \"string\",\n      \"description\": \"URL if navigating\"\n    },\n    \"message\":
        {\n      \"type\": \"string\",\n      \"description\": \"User-facing message\"\n    },\n    \"reasoning\":
        {\n      \"type\": \"string\",\n      \"description\": \"Step by step reasoning
        process\"\n    }\n  },\n  \"required\": [\n    \"response_type\",\n    \"reasoning\"\n  ]\n}\n```\n\nAll
        interactions will be structured in the following way, with the appropriate
        values filled in.\n## Input values\n```json\n{input_values}\n```\n## Output
        values\nRespond exclusively with the output schema fields in the json block
        below.\n```json\n{output_values}\n```\n\nIn adhering to this structure, your
        objective is: Process user action and generate response. Think step by step."},{"role":"user","content":"##
        Input Values\n```json\n{\n  \"action\": {\n    \"name\": \"submit_booking\",\n    \"surface_id\":
        \"booking\",\n    \"source_id\": \"submit-btn\",\n    \"context\": {\n      \"guests\":
        \"2\",\n      \"date\": \"2025-01-15\"\n    }\n  },\n  \"current_data\": \"{\\\"booking\\\":
        {\\\"guests\\\": \\\"2\\\", \\\"date\\\": \\\"2025-01-15\\\"}}\",\n  \"business_rules\":
        \"Maximum 10 guests per booking\"\n}\n```\n\nRespond with the corresponding
        output schema fields wrapped in a ```json ``` block,\nstarting with the heading
        `## Output values`."}],"temperature":1.0}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - OpenAI::Client/Ruby 0.42.0
      Host:
      - api.openai.com
      X-Stainless-Arch:
      - arm64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - MacOS
      X-Stainless-Package-Version:
      - 0.42.0
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.6
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_API_KEY>
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '35596'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Tue, 30 Dec 2025 22:08:59 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-ftp1nrq85er9xnlu0la8snte
      Openai-Processing-Ms:
      - '2496'
      Openai-Project:
      - proj_n52OL5vlzVaXGnYDaGWmVX5F
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '2531'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9998'
      X-Ratelimit-Remaining-Tokens:
      - '191945'
      X-Ratelimit-Reset-Requests:
      - 13.32s
      X-Ratelimit-Reset-Tokens:
      - 2.416s
      X-Request-Id:
      - req_60c98665cca44e30b260dbbcecc6d83d
      X-Openai-Proxy-Wasm:
      - v0.1
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=9xWSct53P5OLysB9Lv7KeuQncJ0L0xd3oyhs5w1XW1Y-1767132539-1.0.1.1-fd7e4KNbSz6HkF5MoNVZ.AOQW0rcfnSwQ6GQo8BsMlWAtAbiyBIaOvjwsy8TZLSPqhf5nuoffCatqzGa8VubLGDQpYflve2AmIXAFu9iiIg;
        path=/; expires=Tue, 30-Dec-25 22:38:59 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=kxSXhq6bip5.cjO1h0sEkpqZpR50a3Z3NtiFIM8Hlok-1767132539717-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 9b64dbd06856ccb6-EWR
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-CscBd1THFc2GRv8YMNhfTbQSenj9l",
          "object": "chat.completion",
          "created": 1767132537,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "## Output values\n```json\n{\n  \"response_type\": \"navigate\",\n  \"streams\": [],\n  \"components\": [],\n  \"data_updates\": [],\n  \"redirect_url\": \"/confirmation\",\n  \"message\": \"Your booking has been submitted successfully.\",\n  \"reasoning\": \"The user submitted a booking for 2 guests on 2025-01-15. This is within the allowed limit of 10 guests, so the booking was processed successfully and the user is redirected to the confirmation page.\"\n}\n```",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 5680,
            "completion_tokens": 105,
            "total_tokens": 5785,
            "prompt_tokens_details": {
              "cached_tokens": 5120,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": "fp_3683ee3deb"
        }
  recorded_at: Tue, 30 Dec 2025 22:08:59 GMT
- request:
    method: post
    uri: https://api.anthropic.com/v1/messages
    body:
      encoding: UTF-8
      string: '{"model":"claude-sonnet-4-20250514","messages":[{"role":"user","content":"##
        Input Values\n```json\n{\n  \"action\": {\n    \"name\": \"submit_booking\",\n    \"surface_id\":
        \"booking\",\n    \"source_id\": \"submit-btn\",\n    \"context\": {\n      \"guests\":
        \"2\",\n      \"date\": \"2025-01-15\"\n    }\n  },\n  \"current_data\": \"{\\\"booking\\\":
        {\\\"guests\\\": \\\"2\\\", \\\"date\\\": \\\"2025-01-15\\\"}}\",\n  \"business_rules\":
        \"Maximum 10 guests per booking\"\n}\n```"}],"max_tokens":4096,"temperature":0.0,"tools":[{"name":"json_output","description":"Output
        the result in the required JSON format","input_schema":{"type":"object","properties":{"response_type":{"type":"string","enum":["update_ui","navigate","delete_surface","no_op"]},"streams":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"StreamOp"},"action":{"type":"string","enum":["append","prepend","replace","update","remove","before","after"]},"target":{"type":"string","description":"Target
        element ID"},"component_ids":{"type":"array","items":{"type":"string"},"description":"Components
        to render"}},"required":["_type","action","target","component_ids"],"description":"A2UI::StreamOp
        struct"}},"components":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"TextComponent"},"id":{"type":"string"},"content":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Text content"},"usage_hint":{"type":"string","enum":["h1","h2","h3","h4","h5","body","caption"]}},"required":["_type","id","content","usage_hint"],"description":"A2UI::TextComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ImageComponent"},"id":{"type":"string"},"src":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Image URL"},"alt":{"type":"string"},"fit":{"type":"string","enum":["contain","cover","fill","scale_down","none"]}},"required":["_type","id","src","alt","fit"],"description":"A2UI::ImageComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"IconComponent"},"id":{"type":"string"},"name":{"type":"string","description":"Material
        icon name (e.g., check, close, menu)"},"size":{"type":"integer"}},"required":["_type","id","name","size"],"description":"A2UI::IconComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ButtonComponent"},"id":{"type":"string"},"label":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Button label text"},"action":{"type":"object","properties":{"_type":{"type":"string","const":"Action"},"name":{"type":"string","description":"Action
        identifier sent to server"},"context":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"ContextBinding"},"key":{"type":"string","description":"Key
        name in the action context"},"path":{"type":"string","description":"JSON Pointer
        to extract value from"}},"required":["_type","key","path"],"description":"A2UI::ContextBinding
        struct"}}},"required":["_type","name","context"],"description":"A2UI::Action
        struct"},"disabled":{"type":"boolean"},"variant":{"type":"string","description":"primary,
        secondary, or danger"}},"required":["_type","id","label","action","disabled","variant"],"description":"A2UI::ButtonComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"TextFieldComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to bound value in data model"},"input_type":{"type":"string","enum":["text","number","date","longtext","email","tel","url"]},"label":{"type":"string"},"placeholder":{"type":"string"},"is_required":{"type":"boolean","description":"Whether
        the field is required"}},"required":["_type","id","value","input_type","label","placeholder","is_required"],"description":"A2UI::TextFieldComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"CheckBoxComponent"},"id":{"type":"string"},"checked":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to boolean in data model"},"label":{"type":"string"}},"required":["_type","id","checked","label"],"description":"A2UI::CheckBoxComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"SliderComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to numeric value"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"label":{"type":"string"}},"required":["_type","id","value","min","max","step","label"],"description":"A2UI::SliderComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"SelectComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to selected value"},"options_path":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to array of {value, label} options"},"label":{"type":"string"},"placeholder":{"type":"string"}},"required":["_type","id","value","options_path","label","placeholder"],"description":"A2UI::SelectComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"RowComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"distribution":{"type":"string","enum":["start","center","end","space_between","space_around","space_evenly"]},"alignment":{"type":"string","enum":["start","center","end","stretch"]},"gap":{"type":"integer"}},"required":["_type","id","children","distribution","alignment","gap"],"description":"A2UI::RowComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ColumnComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"distribution":{"type":"string","enum":["start","center","end","space_between","space_around","space_evenly"]},"alignment":{"type":"string","enum":["start","center","end","stretch"]},"gap":{"type":"integer"}},"required":["_type","id","children","distribution","alignment","gap"],"description":"A2UI::ColumnComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"CardComponent"},"id":{"type":"string"},"child_id":{"type":"string","description":"ID
        of the child component"},"title":{"type":"string"},"elevation":{"type":"integer"}},"required":["_type","id","child_id","title","elevation"],"description":"A2UI::CardComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ListComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"orientation":{"type":"string","enum":["horizontal","vertical"]}},"required":["_type","id","children","orientation"],"description":"A2UI::ListComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DividerComponent"},"id":{"type":"string"},"orientation":{"type":"string","enum":["horizontal","vertical"]}},"required":["_type","id","orientation"],"description":"A2UI::DividerComponent
        struct"}],"description":"Union of multiple types"}},"data_updates":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"DataUpdate"},"path":{"type":"string","description":"JSON
        Pointer path (e.g., /reservation/guests)"},"entries":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"StringValue"},"key":{"type":"string"},"string":{"type":"string"}},"required":["_type","key","string"],"description":"A2UI::StringValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"NumberValue"},"key":{"type":"string"},"number":{"type":"number"}},"required":["_type","key","number"],"description":"A2UI::NumberValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"BooleanValue"},"key":{"type":"string"},"boolean":{"type":"boolean"}},"required":["_type","key","boolean"],"description":"A2UI::BooleanValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ObjectValue"},"key":{"type":"string"},"entries":{"type":"object","additionalProperties":{"type":"string"},"description":"Nested
        key-value pairs as JSON-like hash"}},"required":["_type","key","entries"],"description":"A2UI::ObjectValue
        struct"}],"description":"Union of multiple types"},"description":"Values to
        set at this path"}},"required":["_type","path","entries"],"description":"A2UI::DataUpdate
        struct"}},"redirect_url":{"type":"string"},"message":{"type":"string"},"reasoning":{"type":"string"}},"required":["response_type","streams","components","data_updates","redirect_url","message","reasoning"]}}],"tool_choice":{"type":"tool","name":"json_output"},"system":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"action\": {\n      \"type\": \"object\",\n      \"properties\":
        {\n        \"_type\": {\n          \"type\": \"string\",\n          \"const\":
        \"UserAction\"\n        },\n        \"name\": {\n          \"type\": \"string\",\n          \"description\":
        \"Action name from component\"\n        },\n        \"surface_id\": {\n          \"type\":
        \"string\"\n        },\n        \"source_id\": {\n          \"type\": \"string\",\n          \"description\":
        \"Component ID that triggered action\"\n        },\n        \"context\": {\n          \"type\":
        \"object\",\n          \"additionalProperties\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": \"Resolved context values\"\n        }\n      },\n      \"required\":
        [\n        \"_type\",\n        \"name\",\n        \"surface_id\",\n        \"source_id\",\n        \"context\"\n      ],\n      \"description\":
        \"A2UI::UserAction struct\"\n    },\n    \"current_data\": {\n      \"type\":
        \"string\",\n      \"description\": \"Surface data as JSON\"\n    },\n    \"business_rules\":
        {\n      \"type\": \"string\",\n      \"description\": \"Domain constraints\"\n    }\n  },\n  \"required\":
        [\n    \"action\"\n  ]\n}\n```\n\nYour objective is: Process user action and
        generate response. Think step by step."}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Anthropic::Client/Ruby 1.16.2
      Host:
      - api.anthropic.com
      X-Stainless-Arch:
      - arm64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - MacOS
      X-Stainless-Package-Version:
      - 1.16.2
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.6
      Content-Type:
      - application/json
      Anthropic-Version:
      - '2023-06-01'
      X-Api-Key:
      - "<ANTHROPIC_API_KEY>"
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '13948'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 31 Dec 2025 13:18:56 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Anthropic-Ratelimit-Input-Tokens-Limit:
      - '450000'
      Anthropic-Ratelimit-Input-Tokens-Remaining:
      - '448000'
      Anthropic-Ratelimit-Input-Tokens-Reset:
      - '2025-12-31T13:18:47Z'
      Anthropic-Ratelimit-Output-Tokens-Limit:
      - '90000'
      Anthropic-Ratelimit-Output-Tokens-Remaining:
      - '89000'
      Anthropic-Ratelimit-Output-Tokens-Reset:
      - '2025-12-31T13:18:56Z'
      Anthropic-Ratelimit-Requests-Limit:
      - '1000'
      Anthropic-Ratelimit-Requests-Remaining:
      - '999'
      Anthropic-Ratelimit-Requests-Reset:
      - '2025-12-31T13:18:45Z'
      Anthropic-Ratelimit-Tokens-Limit:
      - '540000'
      Anthropic-Ratelimit-Tokens-Remaining:
      - '537000'
      Anthropic-Ratelimit-Tokens-Reset:
      - '2025-12-31T13:18:47Z'
      Request-Id:
      - req_011CWeqA2Lysi6nqYGYFNy3H
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Anthropic-Organization-Id:
      - '008b8384-4ae5-436d-a319-c5a07111a158'
      Server:
      - cloudflare
      X-Envoy-Upstream-Service-Time:
      - '10938'
      Cf-Cache-Status:
      - DYNAMIC
      X-Robots-Tag:
      - none
      Cf-Ray:
      - 9b6a108d7b69c33c-EWR
    body:
      encoding: ASCII-8BIT
      string: '{"model":"claude-sonnet-4-20250514","id":"msg_01YEXHrtWgpaosPvDKdya3zc","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_015qFA3BZLPSCZfbVd9VaVYd","name":"json_output","input":{"response_type":"update_ui","streams":[],"components":[{"_type":"TextComponent","id":"success-message","content":{"_type":"LiteralValue","value":"Booking
        Confirmed!"},"usage_hint":"h2"},{"_type":"TextComponent","id":"booking-details","content":{"_type":"LiteralValue","value":"Your
        booking for 2 guests on January 15, 2025 has been successfully submitted."},"usage_hint":"body"},{"_type":"IconComponent","id":"success-icon","name":"check_circle","size":48},{"_type":"ColumnComponent","id":"confirmation-layout","children":{"_type":"ExplicitChildren","ids":["success-icon","success-message","booking-details"]},"distribution":"center","alignment":"center","gap":16}],"data_updates":[{"_type":"DataUpdate","path":"/booking/status","entries":[{"_type":"StringValue","key":"status","string":"confirmed"}]},{"_type":"DataUpdate","path":"/booking/confirmation_id","entries":[{"_type":"StringValue","key":"confirmation_id","string":"BK-20250115-001"}]}],"redirect_url":"","message":"Booking
        successfully submitted for 2 guests on January 15, 2025","reasoning":"The
        user submitted a booking with 2 guests for January 15, 2025. This is within
        the business rule limit of maximum 10 guests per booking. I''m processing
        this as a successful booking submission and showing a confirmation screen
        with the booking details. The UI is updated to show a success message with
        an icon and the booking details, and the data model is updated to reflect
        the confirmed status and generate a confirmation ID."}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":4808,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":668,"service_tier":"standard"}}'
  recorded_at: Wed, 31 Dec 2025 13:18:56 GMT
- request:
    method: post
    uri: https://api.anthropic.com/v1/messages
    body:
      encoding: UTF-8
      string: '{"model":"claude-sonnet-4-20250514","messages":[{"role":"user","content":"##
        Input Values\n```json\n{\n  \"action\": {\n    \"name\": \"submit_booking\",\n    \"surface_id\":
        \"booking\",\n    \"source_id\": \"submit-btn\",\n    \"context\": {\n      \"guests\":
        \"2\",\n      \"date\": \"2025-01-15\"\n    }\n  },\n  \"current_data\": \"{\\\"booking\\\":
        {\\\"guests\\\": \\\"2\\\", \\\"date\\\": \\\"2025-01-15\\\"}}\",\n  \"business_rules\":
        \"Maximum 10 guests per booking\"\n}\n```"}],"max_tokens":4096,"temperature":0.0,"tools":[{"name":"json_output","description":"Output
        the result in the required JSON format","input_schema":{"type":"object","properties":{"response_type":{"type":"string","enum":["update_ui","navigate","delete_surface","no_op"]},"streams":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"StreamOp"},"action":{"type":"string","enum":["append","prepend","replace","update","remove","before","after"]},"target":{"type":"string","description":"Target
        element ID"},"component_ids":{"type":"array","items":{"type":"string"},"description":"Components
        to render"}},"required":["_type","action","target","component_ids"],"description":"A2UI::StreamOp
        struct"}},"components":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"TextComponent"},"id":{"type":"string"},"content":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Text content"},"usage_hint":{"type":"string","enum":["h1","h2","h3","h4","h5","body","caption"]}},"required":["_type","id","content","usage_hint"],"description":"A2UI::TextComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ImageComponent"},"id":{"type":"string"},"src":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Image URL"},"alt":{"type":"string"},"fit":{"type":"string","enum":["contain","cover","fill","scale_down","none"]}},"required":["_type","id","src","alt","fit"],"description":"A2UI::ImageComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"IconComponent"},"id":{"type":"string"},"name":{"type":"string","description":"Material
        icon name (e.g., check, close, menu)"},"size":{"type":"integer"}},"required":["_type","id","name","size"],"description":"A2UI::IconComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ButtonComponent"},"id":{"type":"string"},"label":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Button label text"},"action":{"type":"object","properties":{"_type":{"type":"string","const":"Action"},"name":{"type":"string","description":"Action
        identifier sent to server"},"context":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"ContextBinding"},"key":{"type":"string","description":"Key
        name in the action context"},"path":{"type":"string","description":"JSON Pointer
        to extract value from"}},"required":["_type","key","path"],"description":"A2UI::ContextBinding
        struct"}}},"required":["_type","name","context"],"description":"A2UI::Action
        struct"},"disabled":{"type":"boolean"},"variant":{"type":"string","description":"primary,
        secondary, or danger"}},"required":["_type","id","label","action","disabled","variant"],"description":"A2UI::ButtonComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"TextFieldComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to bound value in data model"},"input_type":{"type":"string","enum":["text","number","date","longtext","email","tel","url"]},"label":{"type":"string"},"placeholder":{"type":"string"},"is_required":{"type":"boolean","description":"Whether
        the field is required"}},"required":["_type","id","value","input_type","label","placeholder","is_required"],"description":"A2UI::TextFieldComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"CheckBoxComponent"},"id":{"type":"string"},"checked":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to boolean in data model"},"label":{"type":"string"}},"required":["_type","id","checked","label"],"description":"A2UI::CheckBoxComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"SliderComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to numeric value"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"label":{"type":"string"}},"required":["_type","id","value","min","max","step","label"],"description":"A2UI::SliderComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"SelectComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to selected value"},"options_path":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to array of {value, label} options"},"label":{"type":"string"},"placeholder":{"type":"string"}},"required":["_type","id","value","options_path","label","placeholder"],"description":"A2UI::SelectComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"RowComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"distribution":{"type":"string","enum":["start","center","end","space_between","space_around","space_evenly"]},"alignment":{"type":"string","enum":["start","center","end","stretch"]},"gap":{"type":"integer"}},"required":["_type","id","children","distribution","alignment","gap"],"description":"A2UI::RowComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ColumnComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"distribution":{"type":"string","enum":["start","center","end","space_between","space_around","space_evenly"]},"alignment":{"type":"string","enum":["start","center","end","stretch"]},"gap":{"type":"integer"}},"required":["_type","id","children","distribution","alignment","gap"],"description":"A2UI::ColumnComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"CardComponent"},"id":{"type":"string"},"child_id":{"type":"string","description":"ID
        of the child component"},"title":{"type":"string"},"elevation":{"type":"integer"}},"required":["_type","id","child_id","title","elevation"],"description":"A2UI::CardComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ListComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"orientation":{"type":"string","enum":["horizontal","vertical"]}},"required":["_type","id","children","orientation"],"description":"A2UI::ListComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DividerComponent"},"id":{"type":"string"},"orientation":{"type":"string","enum":["horizontal","vertical"]}},"required":["_type","id","orientation"],"description":"A2UI::DividerComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"TabsComponent"},"id":{"type":"string"},"tabs":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"TabItem"},"label":{"type":"string","description":"Tab
        label text"},"child_id":{"type":"string","description":"ID of the content
        component for this tab"}},"required":["_type","label","child_id"],"description":"A2UI::TabItem
        struct"},"description":"List of tab definitions with labels and content IDs"},"active_index":{"type":"integer","description":"Currently
        active tab index (0-based)"}},"required":["_type","id","tabs","active_index"],"description":"A2UI::TabsComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ModalComponent"},"id":{"type":"string"},"child_id":{"type":"string","description":"ID
        of the content component inside the modal"},"title":{"type":"string","description":"Optional
        modal title"},"is_open":{"type":"boolean","description":"Whether the modal
        is currently visible"},"size":{"type":"string","enum":["small","medium","large","fullscreen"],"description":"Modal
        size variant"},"dismissible":{"type":"boolean","description":"Whether the
        modal can be dismissed by clicking outside"}},"required":["_type","id","child_id","title","is_open","size","dismissible"],"description":"A2UI::ModalComponent
        struct"}],"description":"Union of multiple types"}},"data_updates":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"DataUpdate"},"path":{"type":"string","description":"JSON
        Pointer path (e.g., /reservation/guests)"},"entries":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"StringValue"},"key":{"type":"string"},"string":{"type":"string"}},"required":["_type","key","string"],"description":"A2UI::StringValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"NumberValue"},"key":{"type":"string"},"number":{"type":"number"}},"required":["_type","key","number"],"description":"A2UI::NumberValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"BooleanValue"},"key":{"type":"string"},"boolean":{"type":"boolean"}},"required":["_type","key","boolean"],"description":"A2UI::BooleanValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ObjectValue"},"key":{"type":"string"},"entries":{"type":"object","additionalProperties":{"type":"string"},"description":"Nested
        key-value pairs as JSON-like hash"}},"required":["_type","key","entries"],"description":"A2UI::ObjectValue
        struct"}],"description":"Union of multiple types"},"description":"Values to
        set at this path"}},"required":["_type","path","entries"],"description":"A2UI::DataUpdate
        struct"}},"redirect_url":{"type":"string"},"message":{"type":"string"},"reasoning":{"type":"string"}},"required":["response_type","streams","components","data_updates","redirect_url","message","reasoning"]}}],"tool_choice":{"type":"tool","name":"json_output"},"system":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"action\": {\n      \"type\": \"object\",\n      \"properties\":
        {\n        \"_type\": {\n          \"type\": \"string\",\n          \"const\":
        \"UserAction\"\n        },\n        \"name\": {\n          \"type\": \"string\",\n          \"description\":
        \"Action name from component\"\n        },\n        \"surface_id\": {\n          \"type\":
        \"string\"\n        },\n        \"source_id\": {\n          \"type\": \"string\",\n          \"description\":
        \"Component ID that triggered action\"\n        },\n        \"context\": {\n          \"type\":
        \"object\",\n          \"additionalProperties\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": \"Resolved context values\"\n        }\n      },\n      \"required\":
        [\n        \"_type\",\n        \"name\",\n        \"surface_id\",\n        \"source_id\",\n        \"context\"\n      ],\n      \"description\":
        \"A2UI::UserAction struct\"\n    },\n    \"current_data\": {\n      \"type\":
        \"string\",\n      \"description\": \"Surface data as JSON\"\n    },\n    \"business_rules\":
        {\n      \"type\": \"string\",\n      \"description\": \"Domain constraints\"\n    }\n  },\n  \"required\":
        [\n    \"action\"\n  ]\n}\n```\n\nYour objective is: Process user action and
        generate response. Think step by step."}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Anthropic::Client/Ruby 1.16.2
      Host:
      - api.anthropic.com
      X-Stainless-Arch:
      - arm64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - MacOS
      X-Stainless-Package-Version:
      - 1.16.2
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.6
      Content-Type:
      - application/json
      Anthropic-Version:
      - '2023-06-01'
      X-Api-Key:
      - "<ANTHROPIC_API_KEY>"
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '15304'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 01 Jan 2026 22:16:28 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Anthropic-Ratelimit-Input-Tokens-Limit:
      - '450000'
      Anthropic-Ratelimit-Input-Tokens-Remaining:
      - '447000'
      Anthropic-Ratelimit-Input-Tokens-Reset:
      - '2026-01-01T22:16:19Z'
      Anthropic-Ratelimit-Output-Tokens-Limit:
      - '90000'
      Anthropic-Ratelimit-Output-Tokens-Remaining:
      - '89000'
      Anthropic-Ratelimit-Output-Tokens-Reset:
      - '2026-01-01T22:16:28Z'
      Anthropic-Ratelimit-Requests-Limit:
      - '1000'
      Anthropic-Ratelimit-Requests-Remaining:
      - '999'
      Anthropic-Ratelimit-Requests-Reset:
      - '2026-01-01T22:16:17Z'
      Anthropic-Ratelimit-Tokens-Limit:
      - '540000'
      Anthropic-Ratelimit-Tokens-Remaining:
      - '536000'
      Anthropic-Ratelimit-Tokens-Reset:
      - '2026-01-01T22:16:19Z'
      Request-Id:
      - req_011CWhRxNfMd8CJ4hV8VQXSt
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Anthropic-Organization-Id:
      - '008b8384-4ae5-436d-a319-c5a07111a158'
      Server:
      - cloudflare
      X-Envoy-Upstream-Service-Time:
      - '10634'
      Cf-Cache-Status:
      - DYNAMIC
      X-Robots-Tag:
      - none
      Cf-Ray:
      - 9b7561548d1d4334-EWR
    body:
      encoding: ASCII-8BIT
      string: '{"model":"claude-sonnet-4-20250514","id":"msg_01GqskgS3YnrKQt3Kw8W7R5M","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BLLtwTcTrRgYFAR2s15Bi3","name":"json_output","input":{"response_type":"update_ui","streams":[],"components":[{"_type":"TextComponent","id":"success-message","content":{"_type":"LiteralValue","value":"Booking
        Confirmed!"},"usage_hint":"h2"},{"_type":"TextComponent","id":"booking-details","content":{"_type":"LiteralValue","value":"Your
        booking for 2 guests on January 15, 2025 has been successfully submitted."},"usage_hint":"body"},{"_type":"IconComponent","id":"success-icon","name":"check_circle","size":48},{"_type":"ButtonComponent","id":"new-booking-btn","label":{"_type":"LiteralValue","value":"Make
        Another Booking"},"action":{"_type":"Action","name":"new_booking","context":[]},"disabled":false,"variant":"primary"}],"data_updates":[{"_type":"DataUpdate","path":"/booking/status","entries":[{"_type":"StringValue","key":"status","string":"confirmed"}]},{"_type":"DataUpdate","path":"/booking/confirmation_id","entries":[{"_type":"StringValue","key":"confirmation_id","string":"BK-2025-001"}]}],"redirect_url":"","message":"Booking
        successfully submitted for 2 guests on 2025-01-15","reasoning":"The user submitted
        a booking with 2 guests for January 15, 2025. This is within the business
        rule limit of maximum 10 guests per booking. I''m processing this as a successful
        booking submission and providing confirmation UI components including a success
        message, booking details, success icon, and option to make another booking.
        I''m also updating the data model to reflect the confirmed status and generate
        a confirmation ID."}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":5236,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":681,"service_tier":"standard"}}'
  recorded_at: Thu, 01 Jan 2026 22:16:27 GMT
- request:
    method: post
    uri: https://api.anthropic.com/v1/messages
    body:
      encoding: UTF-8
      string: '{"model":"claude-sonnet-4-20250514","messages":[{"role":"user","content":"##
        Input Values\n```json\n{\n  \"action\": {\n    \"name\": \"submit_booking\",\n    \"surface_id\":
        \"booking\",\n    \"source_id\": \"submit-btn\",\n    \"context\": {\n      \"guests\":
        \"2\",\n      \"date\": \"2025-01-15\"\n    }\n  },\n  \"current_data\": \"{\\\"booking\\\":
        {\\\"guests\\\": \\\"2\\\", \\\"date\\\": \\\"2025-01-15\\\"}}\",\n  \"business_rules\":
        \"Maximum 10 guests per booking\"\n}\n```"}],"max_tokens":4096,"temperature":0.0,"tools":[{"name":"json_output","description":"Output
        the result in the required JSON format","input_schema":{"type":"object","properties":{"response_type":{"type":"string","enum":["update_ui","navigate","delete_surface","no_op"]},"streams":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"StreamOp"},"action":{"type":"string","enum":["append","prepend","replace","update","remove","before","after"]},"target":{"type":"string","description":"Target
        element ID"},"component_ids":{"type":"array","items":{"type":"string"},"description":"Components
        to render"}},"required":["_type","action","target","component_ids"],"description":"A2UI::StreamOp
        struct"}},"components":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"TextComponent"},"id":{"type":"string"},"content":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Text content"},"usage_hint":{"type":"string","enum":["h1","h2","h3","h4","h5","body","caption"]}},"required":["_type","id","content","usage_hint"],"description":"A2UI::TextComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ImageComponent"},"id":{"type":"string"},"src":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Image URL"},"alt":{"type":"string"},"fit":{"type":"string","enum":["contain","cover","fill","scale_down","none"]}},"required":["_type","id","src","alt","fit"],"description":"A2UI::ImageComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"IconComponent"},"id":{"type":"string"},"name":{"type":"string","description":"Material
        icon name (e.g., check, close, menu)"},"size":{"type":"integer"}},"required":["_type","id","name","size"],"description":"A2UI::IconComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ButtonComponent"},"id":{"type":"string"},"label":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Button label text"},"action":{"type":"object","properties":{"_type":{"type":"string","const":"Action"},"name":{"type":"string","description":"Action
        identifier sent to server"},"context":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"ContextBinding"},"key":{"type":"string","description":"Key
        name in the action context"},"path":{"type":"string","description":"JSON Pointer
        to extract value from"}},"required":["_type","key","path"],"description":"A2UI::ContextBinding
        struct"}}},"required":["_type","name","context"],"description":"A2UI::Action
        struct"},"disabled":{"type":"boolean"},"variant":{"type":"string","description":"primary,
        secondary, or danger"}},"required":["_type","id","label","action","disabled","variant"],"description":"A2UI::ButtonComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"TextFieldComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to bound value in data model"},"input_type":{"type":"string","enum":["text","number","date","longtext","email","tel","url"]},"label":{"type":"string"},"placeholder":{"type":"string"},"is_required":{"type":"boolean","description":"Whether
        the field is required"}},"required":["_type","id","value","input_type","label","placeholder","is_required"],"description":"A2UI::TextFieldComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"CheckBoxComponent"},"id":{"type":"string"},"checked":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to boolean in data model"},"label":{"type":"string"}},"required":["_type","id","checked","label"],"description":"A2UI::CheckBoxComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"SliderComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to numeric value"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"label":{"type":"string"}},"required":["_type","id","value","min","max","step","label"],"description":"A2UI::SliderComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"SelectComponent"},"id":{"type":"string"},"value":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to selected value"},"options_path":{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"Path
        to array of {value, label} options"},"label":{"type":"string"},"placeholder":{"type":"string"}},"required":["_type","id","value","options_path","label","placeholder"],"description":"A2UI::SelectComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"RowComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"distribution":{"type":"string","enum":["start","center","end","space_between","space_around","space_evenly"]},"alignment":{"type":"string","enum":["start","center","end","stretch"]},"gap":{"type":"integer"}},"required":["_type","id","children","distribution","alignment","gap"],"description":"A2UI::RowComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ColumnComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"distribution":{"type":"string","enum":["start","center","end","space_between","space_around","space_evenly"]},"alignment":{"type":"string","enum":["start","center","end","stretch"]},"gap":{"type":"integer"}},"required":["_type","id","children","distribution","alignment","gap"],"description":"A2UI::ColumnComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"CardComponent"},"id":{"type":"string"},"child_id":{"type":"string","description":"ID
        of the child component"},"title":{"type":"string"},"elevation":{"type":"integer"}},"required":["_type","id","child_id","title","elevation"],"description":"A2UI::CardComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ListComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"Union of multiple types"},"orientation":{"type":"string","enum":["horizontal","vertical"]}},"required":["_type","id","children","orientation"],"description":"A2UI::ListComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DividerComponent"},"id":{"type":"string"},"orientation":{"type":"string","enum":["horizontal","vertical"]}},"required":["_type","id","orientation"],"description":"A2UI::DividerComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"TabsComponent"},"id":{"type":"string"},"tabs":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"TabItem"},"label":{"type":"string","description":"Tab
        label text"},"child_id":{"type":"string","description":"ID of the content
        component for this tab"}},"required":["_type","label","child_id"],"description":"A2UI::TabItem
        struct"},"description":"List of tab definitions with labels and content IDs"},"active_index":{"type":"integer","description":"Currently
        active tab index (0-based)"}},"required":["_type","id","tabs","active_index"],"description":"A2UI::TabsComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ModalComponent"},"id":{"type":"string"},"child_id":{"type":"string","description":"ID
        of the content component inside the modal"},"title":{"type":"string","description":"Optional
        modal title"},"is_open":{"type":"boolean","description":"Whether the modal
        is currently visible"},"size":{"type":"string","enum":["small","medium","large","fullscreen"],"description":"Modal
        size variant"},"dismissible":{"type":"boolean","description":"Whether the
        modal can be dismissed by clicking outside"}},"required":["_type","id","child_id","title","is_open","size","dismissible"],"description":"A2UI::ModalComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"EditorialHeadlineComponent"},"id":{"type":"string"},"content":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"LiteralValue"},"value":{"type":"string","description":"The
        literal string value"}},"required":["_type","value"],"description":"A2UI::LiteralValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"PathReference"},"path":{"type":"string","description":"JSON
        Pointer to data model (e.g., /user/name)"}},"required":["_type","path"],"description":"A2UI::PathReference
        struct"}],"description":"Headline text (8-12 words, no numbers)"}},"required":["_type","id","content"],"description":"A2UI::EditorialHeadlineComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"EditorialInsightComponent"},"id":{"type":"string"},"what":{"type":"string","description":"Observable
        pattern from data (1-2 sentences, no numbers)"},"so_what":{"type":"string","description":"Why
        this matters - the interpretation (1-2 sentences, no numbers)"},"now_what":{"type":"string","description":"Actionable
        recommendation (1 sentence)"}},"required":["_type","id","what","so_what","now_what"],"description":"A2UI::EditorialInsightComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"EditorialMetricComponent"},"id":{"type":"string"},"label":{"type":"string","description":"Metric
        label (e.g., \"HRV\", \"Sleep Score\")"},"value":{"type":"string","description":"Formatted
        value with unit (e.g., \"52ms\", \"85/100\")"},"trend":{"type":["string","null"],"enum":["up","down","stable"],"description":"Trend
        direction (up, down, stable)"},"context":{"type":["string","null"],"description":"Optional
        context (e.g., \"up from 48ms last week\")"}},"required":["_type","id","label","value"],"description":"A2UI::EditorialMetricComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"EditorialMetricsRowComponent"},"id":{"type":"string"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"ExplicitChildren with EditorialMetricComponent IDs"}},"required":["_type","id","children"],"description":"A2UI::EditorialMetricsRowComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"EditorialDividerComponent"},"id":{"type":"string"}},"required":["_type","id"],"description":"A2UI::EditorialDividerComponent
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"EditorialPageComponent"},"id":{"type":"string"},"tone":{"type":"string","enum":["positive","neutral","warning"],"description":"Overall
        tone (positive, neutral, warning)"},"children":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"ExplicitChildren"},"ids":{"type":"array","items":{"type":"string"},"description":"List
        of child component IDs"}},"required":["_type","ids"],"description":"A2UI::ExplicitChildren
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"DataDrivenChildren"},"path":{"type":"string","description":"JSON
        Pointer to array in data model"},"template_id":{"type":"string","description":"Component
        ID to use as template for each item"}},"required":["_type","path","template_id"],"description":"A2UI::DataDrivenChildren
        struct"}],"description":"ExplicitChildren with content component IDs"}},"required":["_type","id","tone","children"],"description":"A2UI::EditorialPageComponent
        struct"}],"description":"Union of multiple types"}},"data_updates":{"type":"array","items":{"type":"object","properties":{"_type":{"type":"string","const":"DataUpdate"},"path":{"type":"string","description":"JSON
        Pointer path (e.g., /reservation/guests)"},"entries":{"type":"array","items":{"oneOf":[{"type":"object","properties":{"_type":{"type":"string","const":"StringValue"},"key":{"type":"string"},"string":{"type":"string"}},"required":["_type","key","string"],"description":"A2UI::StringValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"NumberValue"},"key":{"type":"string"},"number":{"type":"number"}},"required":["_type","key","number"],"description":"A2UI::NumberValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"BooleanValue"},"key":{"type":"string"},"boolean":{"type":"boolean"}},"required":["_type","key","boolean"],"description":"A2UI::BooleanValue
        struct"},{"type":"object","properties":{"_type":{"type":"string","const":"ObjectValue"},"key":{"type":"string"},"entries":{"type":"object","additionalProperties":{"type":"string"},"description":"Nested
        key-value pairs as JSON-like hash"}},"required":["_type","key","entries"],"description":"A2UI::ObjectValue
        struct"}],"description":"Union of multiple types"},"description":"Values to
        set at this path"}},"required":["_type","path","entries"],"description":"A2UI::DataUpdate
        struct"}},"redirect_url":{"type":"string"},"message":{"type":"string"},"reasoning":{"type":"string"}},"required":["response_type","streams","components","data_updates","redirect_url","message","reasoning"]}}],"tool_choice":{"type":"tool","name":"json_output"},"system":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"action\": {\n      \"type\": \"object\",\n      \"properties\":
        {\n        \"_type\": {\n          \"type\": \"string\",\n          \"const\":
        \"UserAction\"\n        },\n        \"name\": {\n          \"type\": \"string\",\n          \"description\":
        \"Action name from component\"\n        },\n        \"surface_id\": {\n          \"type\":
        \"string\"\n        },\n        \"source_id\": {\n          \"type\": \"string\",\n          \"description\":
        \"Component ID that triggered action\"\n        },\n        \"context\": {\n          \"type\":
        \"object\",\n          \"additionalProperties\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": \"Resolved context values\"\n        }\n      },\n      \"required\":
        [\n        \"_type\",\n        \"name\",\n        \"surface_id\",\n        \"source_id\",\n        \"context\"\n      ],\n      \"description\":
        \"A2UI::UserAction struct\"\n    },\n    \"current_data\": {\n      \"type\":
        \"string\",\n      \"description\": \"Surface data as JSON\"\n    },\n    \"business_rules\":
        {\n      \"type\": \"string\",\n      \"description\": \"Domain constraints\"\n    }\n  },\n  \"required\":
        [\n    \"action\"\n  ]\n}\n```\n\nYour objective is: Process user action and
        generate response. Think step by step."}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Anthropic::Client/Ruby 1.16.2
      Host:
      - api.anthropic.com
      X-Stainless-Arch:
      - arm64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - MacOS
      X-Stainless-Package-Version:
      - 1.16.2
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.6
      Content-Type:
      - application/json
      Anthropic-Version:
      - '2023-06-01'
      X-Api-Key:
      - "<ANTHROPIC_API_KEY>"
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '19315'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sat, 03 Jan 2026 20:42:00 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Anthropic-Ratelimit-Input-Tokens-Limit:
      - '450000'
      Anthropic-Ratelimit-Input-Tokens-Remaining:
      - '447000'
      Anthropic-Ratelimit-Input-Tokens-Reset:
      - '2026-01-03T20:41:52Z'
      Anthropic-Ratelimit-Output-Tokens-Limit:
      - '90000'
      Anthropic-Ratelimit-Output-Tokens-Remaining:
      - '89000'
      Anthropic-Ratelimit-Output-Tokens-Reset:
      - '2026-01-03T20:42:00Z'
      Anthropic-Ratelimit-Requests-Limit:
      - '1000'
      Anthropic-Ratelimit-Requests-Remaining:
      - '999'
      Anthropic-Ratelimit-Requests-Reset:
      - '2026-01-03T20:41:50Z'
      Anthropic-Ratelimit-Tokens-Limit:
      - '540000'
      Anthropic-Ratelimit-Tokens-Remaining:
      - '536000'
      Anthropic-Ratelimit-Tokens-Reset:
      - '2026-01-03T20:41:52Z'
      Request-Id:
      - req_011CWm6NSJEwUzaTQ83k4sFv
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Anthropic-Organization-Id:
      - '008b8384-4ae5-436d-a319-c5a07111a158'
      Server:
      - cloudflare
      X-Envoy-Upstream-Service-Time:
      - '9993'
      Cf-Cache-Status:
      - DYNAMIC
      X-Robots-Tag:
      - none
      Cf-Ray:
      - 9b8551b7ae811ba9-MAD
    body:
      encoding: ASCII-8BIT
      string: '{"model":"claude-sonnet-4-20250514","id":"msg_018EwMYNs92Y8GCWiqgbwXwn","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01G9iqiE9V86V45eAnteMgnj","name":"json_output","input":{"response_type":"update_ui","streams":[],"components":[{"_type":"TextComponent","id":"success-message","content":{"_type":"LiteralValue","value":"Booking
        confirmed for 2 guests on January 15, 2025"},"usage_hint":"h2"},{"_type":"TextComponent","id":"confirmation-details","content":{"_type":"LiteralValue","value":"Your
        reservation has been successfully submitted. You will receive a confirmation
        email shortly."},"usage_hint":"body"},{"_type":"ButtonComponent","id":"new-booking-btn","label":{"_type":"LiteralValue","value":"Make
        Another Booking"},"action":{"_type":"Action","name":"new_booking","context":[]},"disabled":false,"variant":"primary"}],"data_updates":[{"_type":"DataUpdate","path":"/booking/status","entries":[{"_type":"StringValue","key":"status","string":"confirmed"}]},{"_type":"DataUpdate","path":"/booking/confirmation_id","entries":[{"_type":"StringValue","key":"confirmation_id","string":"BK-2025-001"}]}],"redirect_url":"","message":"Booking
        successfully submitted for 2 guests on January 15, 2025","reasoning":"The
        user submitted a booking for 2 guests on January 15, 2025. This is within
        the business rule limit of maximum 10 guests per booking. I''m processing
        this as a successful booking submission and providing confirmation UI components
        with success messaging and an option to make another booking. I''m also updating
        the data model to reflect the confirmed status and generate a confirmation
        ID."}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":6548,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":638,"service_tier":"standard"}}'
  recorded_at: Sat, 03 Jan 2026 20:42:00 GMT
recorded_with: VCR 6.4.0
